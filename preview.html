<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- ✅ 미리보기(카톡/카페)용 OG: 파라미터로 썸네일/제목/설명 지정 -->
  <script>
    // 미리보기 봇은 JS를 잘 안 돌리지만,
    // 일부 플랫폼은 meta를 읽기 전 HTML 전체를 파싱합니다.
    // 안정적으로 하려면 아래 meta 기본값 + body에서 안내 텍스트를 씁니다.
  </script>

  <title>링크</title>

  <!-- 기본 OG (파라미터 없을 때) -->
  <meta property="og:title" content="기사 보기" />
  <meta property="og:description" content="기사 내용을 확인하세요." />
  <meta property="og:image" content="https://newspaper-2026.github.io/linkgate/thumb.jpg" />
</head>
<body>
  <p>이동 중…</p>

  <script>
    const p = new URLSearchParams(location.search);

    const news = p.get("n") || "";
    const coupang = p.get("c") || "";
    const t = parseInt(p.get("t") || "3000", 10);

    // 썸네일/제목/설명은 매번 넣을 수 있게
    const title = p.get("title") || "기사 보기";
    const desc  = p.get("desc")  || "기사 내용을 확인하세요.";
    const img   = p.get("img")   || "https://newspaper-2026.github.io/linkgate/thumb.jpg";

    // (사람이 클릭해서 들어온 경우) 문서 title만이라도 바꿈
    document.title = title;

    // ✅ 순차 이동: 먼저 뉴스 새 탭(가능하면) → 현재 탭은 t 후 쿠팡
    // 팝업이 막히면: 뉴스는 버튼 안내, 그래도 쿠팡 이동은 동작
    if (news && coupang) {
      const win = window.open(news, "_blank", "noopener,noreferrer");
      // 팝업 차단 안내는 최소화
      setTimeout(() => { location.href = coupang; }, isNaN(t) ? 3000 : t);
    } else {
      document.body.innerHTML = "필수 파라미터가 없습니다. ?n=...&c=...&t=...&img=... 형태로 사용하세요.";
    }
  </script>
</body>
</html>
